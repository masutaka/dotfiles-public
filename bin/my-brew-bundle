#!/bin/sh -eu

echo "brew updating..."

brew update
outdated=$(brew outdated)

if [ -n "$outdated" ]; then
  cat <<EOF

The following package(s) will upgrade.

$outdated

Are you sure?
If you don't want to upgrade, please type Ctrl-c now.
EOF

  read dummy

  brew cleanup
  brew upgrade
fi

if [ $(hostname) = "masutaka-pc.local" ]; then
  PRIVATE_MACHINE=yes
else
  PRIVATE_MACHINE=no
fi

brew install aspell
brew install aws/tap/aws-sam-cli
brew install awscli
brew install awslogs
brew install binutils
brew install circleci
brew install coreutils
brew install ctop
brew install direnv
brew install gawk
brew install ghq
brew install ghr
brew install git # for diff-highlight
brew install gnu-sed
brew install gnupg
brew install heroku/brew/heroku
brew install highlight
brew install hub
brew install imagemagick
brew install jq
brew install lv
brew install markdown
brew install masutaka/github-nippou/github-nippou
brew install mercurial
brew install mizukmb/homebrew-esa-nippou/esa-nippou
brew install nkf
brew install openssl # macOS doesn't have this.
brew install peco
brew install pkg-config # gem ref
brew install pstree
brew install tcptraceroute
brew install tmux
brew install tree
brew install watch
brew install wget
brew install xz
brew install youtube-dl

if [ "$PRIVATE_MACHINE" = yes ]; then
  brew install ffmpeg
  brew install rsync # Avoid garbled characters of `-v` option
fi

brew install --cask alfred
brew install --cask appcleaner
brew install --cask bitbar
brew install --cask deepl
brew install --cask discord
brew install --cask docker
brew install --cask dropbox
brew install --cask firefox
brew install --cask google-chrome
brew install --cask google-cloud-sdk
brew install --cask google-japanese-ime
brew install --cask grandperspective
brew install --cask imageoptim
brew install --cask kindle-previewer
brew install --cask licecap
brew install --cask railwaycat/emacsmacport/emacs-mac
brew install --cask trailer

if [ "$PRIVATE_MACHINE" = yes ]; then
  brew install --cask handbrake
  brew install --cask horos
  brew install --cask lyn
  brew install --cask skype
  brew install --cask vlc
else
  brew install --cask cyberduck
  brew install --cask smcfancontrol  # https://getbitbar.com/plugins/System/cpu-temperature.5s.sh
  brew install --cask vagrant
  brew install --cask virtualbox
  brew install --cask zoom
fi
